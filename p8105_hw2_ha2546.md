p8105\_hw2\_ha2546
================
Hana Akbarnejad
9/27/2019

``` r
library(readxl)

trash_data = 
  read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = "Mr. Trash Wheel") %>% 
  janitor::clean_names() %>% 
  select(-x15) %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    as.integer(sports_balls)
  )
```

    ## New names:
    ## * `` -> ...15
    ## * `` -> ...16
    ## * `` -> ...17

``` r
prcpt2017_data = 
  read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = "2017 Precipitation", skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(
    year = "2017"
  )

prcpt2018_data = 
  read_excel("data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = "2018 Precipitation", skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(
    year = "2018"
  )

prcpt_data =
  bind_rows(prcpt2017_data, prcpt2018_data) %>%
  mutate(
    month = month.abb[month]
  )
prcpt_data
```

    ## # A tibble: 24 x 3
    ##    month total year 
    ##    <chr> <dbl> <chr>
    ##  1 Jan    2.34 2017 
    ##  2 Feb    1.46 2017 
    ##  3 Mar    3.57 2017 
    ##  4 Apr    3.99 2017 
    ##  5 May    5.64 2017 
    ##  6 Jun    1.4  2017 
    ##  7 Jul    7.09 2017 
    ##  8 Aug    4.44 2017 
    ##  9 Sep    1.95 2017 
    ## 10 Oct    0    2017 
    ## # ... with 14 more rows

In Mr. Trash Wheel data, we have 344 observations, and we have key
variables such as dumpster, month, year, and date. In resulting
precipitation dataset which we obtained from combining precipitation
data of 2017 and 2018, we have 24 total precipitation observations in
total and we have ey variables month and year. According to the
precipitation dataset, the total precipitation in 2018 is 70.33 inches
and the median number of sports balls in a dumpster in 2017 is 8.

## Problem 2

First part, dealing with FiveThirtyEight data.

``` r
pols_month_data = read_csv("data/pols-month.csv") %>% 
  janitor::clean_names() %>%
  separate(mon, into = c("year", "month", "day"), convert = TRUE) %>% 
  mutate(
    prez_gop = replace(prez_gop, prez_gop == "2", "1"),
    month = month.abb[(month)],
    president = recode(prez_gop, "1" = "gop" , "0" = "dem"),
  ) %>% 
    select(-starts_with("prez"), -day)
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

for prez\_gop there were four observations that were coded as 2 instead
of 1. I first changed them to 1 as advised by TA’s and then recoded.

``` r
snp_data = read_csv("data/snp.csv") %>% 
  janitor::clean_names() %>% 
  separate(date, into = c("month", "day", "year"), convert = TRUE) %>%
  arrange(year, month) %>% 
  select(year, month, close) %>% 
  mutate(
    month = month.abb[(month)]
  )
```

    ## Parsed with column specification:
    ## cols(
    ##   date = col_character(),
    ##   close = col_double()
    ## )

``` r
unemployment_data = read_csv("data/unemployment.csv") %>% 
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemp_prcnt"
  ) %>% 
    janitor::clean_names()                                      #can we use janitor here?
```

    ## Parsed with column specification:
    ## cols(
    ##   Year = col_double(),
    ##   Jan = col_double(),
    ##   Feb = col_double(),
    ##   Mar = col_double(),
    ##   Apr = col_double(),
    ##   May = col_double(),
    ##   Jun = col_double(),
    ##   Jul = col_double(),
    ##   Aug = col_double(),
    ##   Sep = col_double(),
    ##   Oct = col_double(),
    ##   Nov = col_double(),
    ##   Dec = col_double()
    ## )

``` r
join_pols_snp = left_join(pols_month_data, snp_data, by = c("year", "month"))

join_all = left_join(join_pols_snp, unemployment_data, by = c("year", "month")) 

# could we use piping here?
# left vs full join
```

## Write a short paragraph about these datasets. Explain briefly what each dataset contained, and describe the resulting dataset (e.g. give the dimension, range of years, and names of key variables).

``` r
pop_names_data = read_csv("data/Popular_Baby_Names.csv") %>% 
  janitor::clean_names() %>% 
  mutate(
    childs_first_name = str_to_title(childs_first_name),
    gender = str_to_lower(gender),
    ethnicity = replace(ethnicity, ethnicity == "ASIAN AND PACI" , "ASIAN AND PACIFIC ISLANDER"),
    ethnicity = replace(ethnicity, ethnicity == "WHITE NON HISP", "WHITE NON HISPANIC"),
    ethnicity = replace(ethnicity, ethnicity == "BLACK NON HISP", "BLACK NON HISPANIC")
  ) %>% 
  mutate(
    ethnicity = str_to_title(ethnicity)                  # should we make gender and ethnicity lower case?!
  )
```

    ## Parsed with column specification:
    ## cols(
    ##   `Year of Birth` = col_double(),
    ##   Gender = col_character(),
    ##   Ethnicity = col_character(),
    ##   `Child's First Name` = col_character(),
    ##   Count = col_double(),
    ##   Rank = col_double()
    ## )

``` r
pop_names_data = distinct(pop_names_data)
```

``` r
olivia_pop = filter(pop_names_data, childs_first_name == "Olivia") %>% 
  select(year_of_birth, ethnicity, rank) %>% 
pivot_wider(
  names_from = "year_of_birth", 
  values_from = "rank")
```

``` r
male_pop = filter(pop_names_data, gender == "male" & rank == "1") %>% 
    select(year_of_birth, ethnicity, childs_first_name) %>% 
pivot_wider(
  names_from = "year_of_birth", 
  values_from = "childs_first_name")
```

``` r
pop_scatterplot = pop_names_data %>% 
  filter(gender == "male" & ethnicity == "White Non Hispanic" & year_of_birth == "2016") %>% 
  ggplot(aes(x = rank, y = count)) + geom_point() + geom_text(aes(label = childs_first_name),hjust = 0, vjust = 0)

# what is this?!
```
