---
title: "p8105_hw2_ha2546"
author: "Hana Akbarnejad"
date: "9/27/2019"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(tidyverse)
library(dplyr)
```

```{r Mr.Trash Wheel}

library(readxl)

trash_data = 
  read_excel("data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = "Mr. Trash Wheel") %>% 
  janitor::clean_names() %>% 
  select(-x15) %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    as.integer(sports_balls)
  )

```

```{r precipitation}

prcpt2017_data = 
  read_excel("data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = "2017 Precipitation", skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(
    year = "2017"
  )

prcpt2018_data = 
  read_excel("data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = "2018 Precipitation", skip = 1) %>% 
  janitor::clean_names() %>% 
  drop_na() %>% 
  mutate(
    year = "2018"
  )

prcpt_data =
  bind_rows(prcpt2017_data, prcpt2018_data) %>%
  mutate(
    month = month.abb[month]
  )
prcpt_data
```

In Mr. Trash Wheel data, we have `r nrow(trash_data)` observations, and we have key variables such as dumpster, month, year, and date. In resulting precipitation dataset which we obtained from combining precipitation data of 2017 and 2018, we have `r nrow(prcpt_data)` total precipitation observations in total and we have ey variables month and year. According to the precipitation dataset, the total precipitation in 2018 is `r sum(pull(prcpt2018_data, total))` inches and the median number of sports balls in a dumpster in 2017 is `r median(pull(filter(trash_data, year == 2017), sports_balls))`.

```{r prob2_pols_month}

pols_month_data = read_csv("data/pols-month.csv") %>% 
  janitor::clean_names() %>%
  separate(mon, into = c("year", "month", "day")) %>% 
  mutate(
    year = as.integer(year),
    day = as.integer(day),
    month = month.abb[as.integer(month)],
    president = recode(prez_gop, "1" = "gop" , "0" = "dem"),
  ) %>% 
    select(-starts_with("prez"))

```

```{r prob2_snp}

snp_data = read_csv("data/snp.csv") %>% 
  janitor::clean_names() %>% 
  separate(date, into = c("month", "day", "year")) %>%    # why seperates like this?
  mutate (
    year = as.integer(year),
    day = as.integer(day),
    month = as.integer(month)
  ) %>% 
  arrange(year, month) %>% 
  select(year, month, day, close) %>% 
  mutate(                                                 # had to mutate twice(?)
    month = month.abb[as.integer(month)]
  )

```

```{r prob2_unemployment}

unemployment_data = read_csv("data/unemployment.csv") %>% 
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemployment_percent"
  ) %>% 
    janitor::clean_names()                                      #can we use janitor here?

```

